package com.gura.step07.aspect;

import javax.servlet.http.HttpServletRequest;

import org.aspectj.lang.ProceedingJoinPoint;
import org.aspectj.lang.annotation.Around;
import org.aspectj.lang.annotation.Aspect;
import org.springframework.stereotype.Component;
import org.springframework.web.servlet.ModelAndView;

@Aspect
@Component
public class LoginAspect {
	
	@Around("execution(* privatePlay(..))")
	public Object loginCheck(ProceedingJoinPoint joinPoint) throws Throwable{
		//Aop가 적용된 메소드에 전달된 인자를 Object[]에 담아온다.
		Object[] args=joinPoint.getArgs();
		for(Object tmp:args){
			if(tmp instanceof HttpServletRequest){
				HttpServletRequest request=(HttpServletRequest)tmp;
			}
		}
		//Aop가 적용된 메소드가 리턴해주는 객체를 Object type으로 받는다.
		Object obj=joinPoint.proceed();
		if(obj instanceof ModelAndView){
			//원래 type으로 casting 해서
			ModelAndView mView=(ModelAndView)obj;
			//조건부로 원하는 작업을 한다.
			
		}
		return obj;
	}
}
